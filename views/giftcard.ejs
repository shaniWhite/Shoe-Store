<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buy Gift Card</title>
    <link rel="stylesheet" href="/main.css">
    <link rel="stylesheet" href="/other.css">
</head>
<body>
        <header style="width:100%; display:flex; align-items:center; justify-content:space-between; margin:0 0 24px 0; position:sticky; top:0; background:#fff; z-index:1002; box-shadow:0 2px 12px rgba(0,0,0,0.04); padding:24px 0;">
            <div style="flex:1; display:flex; align-items:center; justify-content:center;">
                <form id="header-search" style="display:flex; align-items:center; gap:16px;">
                    <input type="text" id="search" placeholder="Search..." style="font-size:1em; padding:6px 16px; border:1px solid #ccc; border-radius:20px; width:180px; background:#fafafa;" />
                    <a href="/users/cart" class="icon-btn cart-btn" id="header-cart" title="Cart" aria-label="Cart" style="margin-left:8px;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#222" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="22" height="22">
                            <circle cx="7" cy="20" r="2" />
                            <circle cx="17" cy="20" r="2" />
                            <path d="M3 6h2l.4 2M7 6h14l-1.35 6.44a2 2 0 0 1-1.96 1.56H8.53a2 2 0 0 1-1.96-1.56L5.21 6H3z" />
                        </svg>
                    </a>
                    <a href="/users/wishlist" class="icon-btn heart-btn" id="header-wishlist" title="Wishlist" aria-label="Wishlist" style="margin-left:4px;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#222" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="22" height="22">
                            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 1.01 4.5 2.09 1.09-1.08 2.76-2.09 4.5-2.09C19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                    </a>
                </form>
            </div>
            <div style="flex:1; display:flex; align-items:center; justify-content:center;">
                <div style="font-family:'Montserrat', 'Playfair Display', Arial, sans-serif; font-size:2.8em; font-weight:800; letter-spacing:0.12em; color:#222; text-transform:uppercase; text-align:center; position:relative;">
                    StepUp
                    <span style="display:block; width:48px; height:4px; background:#bfa76f; margin:16px auto 0 auto; border-radius:2px;"></span>
                </div>
            </div>
            <div style="flex:1; display:flex; align-items:center; justify-content:flex-end;">
                <button id="hamburger" style="background:none; border:none; cursor:pointer; padding:8px;">
                    <span style="display:block; width:32px; height:24px; position:relative;">
                        <span style="display:block; height:3px; width:100%; background:#222; border-radius:2px; position:absolute; top:0;"></span>
                        <span style="display:block; height:3px; width:100%; background:#222; border-radius:2px; position:absolute; top:10px;"></span>
                        <span style="display:block; height:3px; width:100%; background:#222; border-radius:2px; position:absolute; top:20px;"></span>
                    </span>
                </button>
            </div>
            <%- include('partials/sidebar') %>
        </header>

        <script>
            // Hamburger menu logic
            document.addEventListener('DOMContentLoaded', function() {
                var sidebar = document.getElementById('sidebar');
                var backdrop = document.getElementById('sidebar-backdrop');
                var hamburger = document.getElementById('hamburger');
                var closeSidebar = document.getElementById('close-sidebar');
                if (hamburger && sidebar && backdrop && closeSidebar) {
                    hamburger.addEventListener('click', function(e) {
                        sidebar.style.right = '0';
                        backdrop.style.display = 'block';
                    });
                    closeSidebar.addEventListener('click', function(e) {
                        sidebar.style.right = '-320px';
                        backdrop.style.display = 'none';
                    });
                    backdrop.addEventListener('click', function(e) {
                        sidebar.style.right = '-320px';
                        backdrop.style.display = 'none';
                    });
                }
            });
        </script>

    <div class="page-container">
        <form method="POST" action="/users/giftcard/checkout">
            <div class="form-group">
                <h2>Your best friend is the BEST? Let them know it...</h2>
            </div>
            
            <div class="form-group">
                <h3>FIRST STEP: Choose how much you want to spend on them (we are sure they deserve a lot)</h3>
                <select name="amount" id="amount" required>
                    <option value="">Select an amount</option>
                    <option value="30">30 USD</option>
                    <option value="45">45 USD</option>
                    <option value="60">60 USD</option>
                    <option value="75">75 USD</option>
                    <option value="90">90 USD</option>
                    <option value="105">105 USD</option>
                    <option value="120">120 USD</option>
                    <option value="135">135 USD</option>
                    <option value="150">150 USD</option>
                </select>
            </div>
            
            <div class="form-group">
                <h3>SECOND STEP: Write them something sweet, maybe a joke that only the two of you can remember</h3>
                <textarea name="message" id="message" placeholder="Write your message here..." maxlength="200" required></textarea>
                <div class="character-count">Character Count: <span id="charCount">0</span>/200</div>
            </div>
            
            <div class="form-group">
                <h3>THIRD STEP: Write your name</h3>
                <input type="text" name="yourName" id="yourName" placeholder="Your Name" required>
            </div>
            
            <div class="form-group">
                <h3>FOURTH STEP: Send it as a gift?</h3>
                <div style="width: 100%; display: flex; justify-content: space-between;">
                    <button type="button" class="button-option" id="giftButton" style="width: 48%;">Send as a Gift</button>
                    <button type="button" class="button-option" id="selfButton" style="width: 48%;">Send it to Me</button>
                </div>
            </div>
            
            <div class="form-group" id="recipientEmailDiv" style="display:none;">
                <h3>Recipient Email Address:</h3>
                <input type="email" name="recipientEmail" id="recipientEmail" placeholder="Recipient's Email" required>
            </div>

            <div class="form-group" id="selfMessage" style="display:none;">
                <p>You will receive a link to the card and can either forward it to a friend via messenger or print out a postcard and give it to them in person.</p>
            </div>
        
            <div class="form-group">
                <button type="submit" id="checkoutButton">Checkout</button>
            </div>
        </form>
    </div>
    
    <script>
        document.getElementById('giftButton').addEventListener('click', function() {
            document.getElementById('recipientEmailDiv').style.display = 'block';
            document.getElementById('selfMessage').style.display = 'none';
            document.getElementById('recipientEmail').required = true; // Make recipient email required
        });
        
        document.getElementById('selfButton').addEventListener('click', function() {
            document.getElementById('recipientEmailDiv').style.display = 'none';
            document.getElementById('selfMessage').style.display = 'block';
            document.getElementById('recipientEmail').required = false; // Remove required attribute
        });
        
        document.getElementById('message').addEventListener('input', function() {
            document.getElementById('charCount').textContent = this.value.length;
        });
    </script>
</body>
</html>
